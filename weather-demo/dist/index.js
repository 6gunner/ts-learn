#!/usr/bin/env node
"use strict";var e=require("commander"),o=require("axios"),t=require("colors");function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var l=n(o),s=n(t);const a=new e.Command;a.version("0.1.0").option("-c, --city <city_code>","add city name").option("-e --extensions [extensions]","气象类型 base/all","base").option("-h, --help","output usae information");const c=a.opts();a.on("--help",(function(){console.log("  Examples:"),console.log(""),console.log("    this is an example"),console.log("")})),a.parse(process.argv),c.city?console.log(c):a.outputHelp();l.default.get("https://restapi.amap.com/v3/weather/weatherInfo",{params:{city:c.city,key:"320454c545019f9314f07b11f1944ac2",extensions:c.extensions}}).then((e=>{const{lives:o,forecasts:t}=e.data;if(o&&o.length){const e=o[0];console.log(s.default.yellow(e.reporttime)),console.log(s.default.white(`${e.province} ${e.city}`)),console.log(s.default.green(`${e.weather} ${e.temperature} ℃`))}else if(t&&t.length){const e=t[0];console.log(s.default.green(`${e.reporttime}`)),console.log(s.default.white(`${e.province} ${e.city}`));for(const o of e.casts)console.log(s.default.yellow(`${o.date} ${o.dayweather} ${o.daytemp} ℃`))}})).catch((e=>{console.log(s.default.red("查询失败，请重试"),e)}));
